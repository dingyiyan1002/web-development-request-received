<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>forå¾ªç¯ - å¯è§†åŒ–æ¼”ç¤º</title>
  <style>
    * { box-sizing: border-box; }
    body {
      background: #0a0e17;
      color: #c9d1d9;
      font-family: 'Courier New', monospace;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
    }
    h1 { color: #facc15; text-align: center; }
    .container { max-width: 800px; margin: 0 auto; }
    .code-box {
      background: #161b22;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      font-size: 16px;
      line-height: 1.8;
    }
    .code-line { padding: 4px 8px; border-radius: 4px; }
    .code-line.current {
      background: rgba(250,204,21,0.15);
      border-left: 3px solid #facc15;
    }
    .code-line.executed { opacity: 0.4; }
    .keyword { color: #c084fc; }
    .function { color: #fde047; }
    .string { color: #4ade80; }
    .number { color: #fb923c; }
    .var { color: #fff; }
    .var.active { color: #fbbf24; background: rgba(251,191,36,0.2); padding: 2px 4px; border-radius: 3px; }
    .controls { text-align: center; margin: 20px 0; }
    button {
      background: #10b981;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      margin: 0 5px;
    }
    button:hover { background: #059669; }
    button:disabled { background: #4b5563; cursor: not-allowed; }
    .variables { display: flex; gap: 20px; justify-content: center; margin: 20px 0; }
    .var-box {
      background: #1f2937;
      padding: 15px 25px;
      border-radius: 8px;
      text-align: center;
    }
    .var-name { color: #9ca3af; font-size: 14px; }
    .var-value { color: #fbbf24; font-size: 24px; font-weight: bold; }
    .explanation {
      background: #1f2937;
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
    }
    .explanation-title { color: #60a5fa; margin-bottom: 10px; }
    .output {
      background: #000;
      padding: 15px;
      border-radius: 8px;
      font-family: monospace;
      margin-top: 20px;
      min-height: 60px;
    }
    .output-line { color: #4ade80; }
    .step-indicator { text-align: center; color: #6b7280; margin-top: 10px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ”„ forå¾ªç¯æ‰§è¡Œæµç¨‹</h1>
    
    <div class="code-box">
      <div class="code-line" id="line1"><span class="keyword">#include</span> <span class="string">&lt;stdio.h&gt;</span></div>
      <div class="code-line" id="line2"><span class="keyword">int</span> <span class="function">main</span>() {</div>
      <div class="code-line" id="line3">    <span class="keyword">int</span> <span class="var" id="var-sum">sum</span> = 0;</div>
      <div class="code-line" id="line4">    <span class="keyword">for</span> (<span class="keyword">int</span> <span class="var" id="var-i">i</span> = 0; <span class="var" id="var-i2">i</span> &lt; 3; <span class="var" id="var-i3">i</span>++) {</div>
      <div class="code-line" id="line5">        <span class="var" id="var-sum2">sum</span> += <span class="var" id="var-i4">i</span>;</div>
      <div class="code-line" id="line6">    }</div>
      <div class="code-line" id="line7">    <span class="function">printf</span>(<span class="string">"sum = %d\n"</span>, <span class="var" id="var-sum3">sum</span>);</div>
      <div class="code-line" id="line8">    <span class="keyword">return</span> 0;</div>
      <div class="code-line" id="line9">}</div>
    </div>
    
    <div class="variables">
      <div class="var-box">
        <div class="var-name">sum</div>
        <div class="var-value" id="val-sum">0</div>
      </div>
      <div class="var-box">
        <div class="var-name">i</div>
        <div class="var-value" id="val-i">0</div>
      </div>
    </div>
    
    <div class="controls">
      <button id="btn-prev" onclick="prevStep()">â—€ ä¸Šä¸€æ­¥</button>
      <button id="btn-play" onclick="togglePlay()" style="background:#f59e0b">â–¶ æ’­æ”¾</button>
      <button id="btn-next" onclick="nextStep()">ä¸‹ä¸€æ­¥ â–¶</button>
      <button onclick="reset()">â†» é‡ç½®</button>
    </div>
    
    <div class="step-indicator">Step: <span id="step-num">0</span> / 14</div>
    
    <div class="explanation">
      <div class="explanation-title">ğŸ’¡ è¯´æ˜</div>
      <div id="explanation-text">ç‚¹å‡»"æ’­æ”¾"æˆ–"ä¸‹ä¸€æ­¥"å¼€å§‹</div>
    </div>
    
    <div class="output">
      <div>$ ./for_loop</div>
      <div id="output-text"></div>
    </div>
  </div>

  <script>
    let step = 0;
    let isPlaying = false;
    let timer = null;
    let sum = 0;
    let i = 0;
    
    const maxSteps = 14;
    
    const steps = [
      { line: 0, text: 'ç‚¹å‡»"æ’­æ”¾"å¼€å§‹', sum: 0, i: 0, output: '' },
      { line: 1, text: 'ç¨‹åºå…¥å£ main()', sum: 0, i: 0, output: '' },
      { line: 3, text: 'å£°æ˜å˜é‡ sum = 0', sum: 0, i: 0, output: '' },
      { line: 4, text: 'è¿›å…¥ for: i = 0, æ£€æŸ¥ 0 < 3 âœ“', sum: 0, i: 0, output: '' },
      { line: 5, text: 'æ‰§è¡Œå¾ªç¯ä½“: sum += i â†’ sum = 0', sum: 0, i: 0, output: '' },
      { line: 4, text: 'i++ â†’ i = 1, æ£€æŸ¥ 1 < 3 âœ“', sum: 0, i: 1, output: '' },
      { line: 5, text: 'æ‰§è¡Œå¾ªç¯ä½“: sum += i â†’ sum = 1', sum: 1, i: 1, output: '' },
      { line: 4, text: 'i++ â†’ i = 2, æ£€æŸ¥ 2 < 3 âœ“', sum: 1, i: 2, output: '' },
      { line: 5, text: 'æ‰§è¡Œå¾ªç¯ä½“: sum += i â†’ sum = 3', sum: 3, i: 2, output: '' },
      { line: 4, text: 'i++ â†’ i = 3, æ£€æŸ¥ 3 < 3 âœ— é€€å‡º', sum: 3, i: 3, output: '' },
      { line: 7, text: 'printf è¾“å‡º: sum = 3', sum: 3, i: 3, output: 'sum = 3' },
      { line: 8, text: 'return 0', sum: 3, i: 3, output: 'sum = 3' },
      { line: 9, text: 'ç¨‹åºç»“æŸ', sum: 3, i: 3, output: 'sum = 3' },
    ];
    
    function updateUI() {
      // æ›´æ–°ä»£ç è¡Œ
      for (let j = 1; j <= 9; j++) {
        const el = document.getElementById('line' + j);
        el.classList.remove('current', 'executed');
        if (j === steps[step].line) {
          el.classList.add('current');
        } else if (j < steps[step].line) {
          el.classList.add('executed');
        }
      }
      
      // æ›´æ–°å˜é‡
      sum = steps[step].sum;
      i = steps[step].i;
      document.getElementById('val-sum').textContent = sum;
      document.getElementById('val-i').textContent = i;
      
      // é«˜äº®å˜é‡
      document.querySelectorAll('.var').forEach(el => el.classList.remove('active'));
      if (step >= 2) document.getElementById('var-sum')?.classList.add('active');
      if (step >= 3) document.getElementById('var-i')?.classList.add('active');
      if (step === 4 || step === 6 || step === 8) document.getElementById('var-sum2')?.classList.add('active');
      if (step === 5 || step === 7) document.getElementById('var-i4')?.classList.add('active');
      
      // æ›´æ–°è¯´æ˜
      document.getElementById('explanation-text').textContent = steps[step].text;
      
      // æ›´æ–°è¾“å‡º
      if (steps[step].output) {
        document.getElementById('output-text').innerHTML = '<div class="output-line">' + steps[step].output + '</div>';
      }
      
      // æ›´æ–°æ­¥æ•°
      document.getElementById('step-num').textContent = step;
      
      // æ›´æ–°æŒ‰é’®
      document.getElementById('btn-prev').disabled = step === 0;
      document.getElementById('btn-next').disabled = step >= maxSteps;
      document.getElementById('btn-play').textContent = isPlaying ? 'â¸ æš‚åœ' : 'â–¶ æ’­æ”¾';
    }
    
    function nextStep() {
      if (step < maxSteps) {
        step++;
        updateUI();
      } else {
        stopPlay();
      }
    }
    
    function prevStep() {
      if (step > 0) {
        step--;
        updateUI();
      }
    }
    
    function reset() {
      stopPlay();
      step = 0;
      sum = 0;
      i = 0;
      updateUI();
    }
    
    function togglePlay() {
      if (isPlaying) {
        stopPlay();
      } else {
        startPlay();
      }
    }
    
    function startPlay() {
      if (step >= maxSteps) step = 0;
      isPlaying = true;
      updateUI();
      timer = setInterval(() => {
        if (step < maxSteps) {
          step++;
          updateUI();
        } else {
          stopPlay();
        }
      }, 1500);
    }
    
    function stopPlay() {
      isPlaying = false;
      if (timer) {
        clearInterval(timer);
        timer = null;
      }
      updateUI();
    }
    
    // é”®ç›˜æ”¯æŒ
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); nextStep(); }
      if (e.key === 'ArrowLeft') { e.preventDefault(); prevStep(); }
      if (e.key === 'Enter') { e.preventDefault(); togglePlay(); }
      if (e.key === 'r' || e.key === 'R') { e.preventDefault(); reset(); }
    });
    
    updateUI();
  </script>
</body>
</html>
